!function(){var e={875:function(e,t){var r;!function(){"use strict";var o={}.hasOwnProperty;function n(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var s=typeof r;if("string"===s||"number"===s)e.push(r);else if(Array.isArray(r)){if(r.length){var a=n.apply(null,r);a&&e.push(a)}}else if("object"===s){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){e.push(r.toString());continue}for(var l in r)o.call(r,l)&&r[l]&&e.push(l)}}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):void 0===(r=function(){return n}.apply(t,[]))||(e.exports=r)}()},202:function(e){"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var o,n,s;if(Array.isArray(t)){if((o=t.length)!=r.length)return!1;for(n=o;0!=n--;)if(!e(t[n],r[n]))return!1;return!0}if(t instanceof Map&&r instanceof Map){if(t.size!==r.size)return!1;for(n of t.entries())if(!r.has(n[0]))return!1;for(n of t.entries())if(!e(n[1],r.get(n[0])))return!1;return!0}if(t instanceof Set&&r instanceof Set){if(t.size!==r.size)return!1;for(n of t.entries())if(!r.has(n[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(r)){if((o=t.length)!=r.length)return!1;for(n=o;0!=n--;)if(t[n]!==r[n])return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((o=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(n=o;0!=n--;)if(!Object.prototype.hasOwnProperty.call(r,s[n]))return!1;for(n=o;0!=n--;){var a=s[n];if(!e(t[a],r[a]))return!1}return!0}return t!=t&&r!=r}}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,r),s.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=window.wp.element,t=window.React,o=window.ReactDOM,n=window.lodash,s=({children:r,onClose:o})=>{const n=(0,t.useRef)(null);return(0,e.createElement)("div",{ref:n,role:"dialog","aria-modal":"true",className:"crowdsignal-forms-dialog-wrapper",onClick:e=>e.target===n.current&&o()},r)},a=window.wp.htmlEntities,l=window.wp.i18n;const i="rating",c="feedback",u="submit",d=Object.freeze({OPEN:"open",CLOSED:"closed",CLOSED_AFTER:"closed-after"}),f=(e,t)=>(0,n.mapKeys)({backgroundColor:e.backgroundColor||"#ffffff",buttonColor:e.buttonColor||t.accentColor,buttonTextColor:e.buttonTextColor||t.textColorInverted,textColor:e.textColor||t.textColor,textSize:t.textSize},((e,t)=>`--crowdsignal-forms-${(0,n.kebabCase)(t)}`));var m=({showLogo:t,children:r,message:o,trackRef:n="cs-forms-poll"})=>(0,e.createElement)("div",{className:"crowdsignal-forms__footer-branding"},(0,e.createElement)("a",{className:"crowdsignal-forms__footer-cs-link",href:"https://crowdsignal.com?ref="+n,target:"_blank",rel:"noopener noreferrer"},o||(0,l.__)("Create your own poll with Crowdsignal","crowdsignal-forms")),r,t&&(0,e.createElement)("a",{href:"https://crowdsignal.com?ref="+n,target:"_blank",rel:"noopener noreferrer"},(0,e.createElement)("img",{className:"crowdsignal-forms__footer-branding-logo",src:"https://app.crowdsignal.com/images/svg/cs-logo-dots.svg",alt:"Crowdsignal sticker"}))),p=r(202),g=r.n(p),w=window.wp.compose;const b=e=>{let t=window.getComputedStyle(e).backgroundColor;for(;"rgba(0, 0, 0, 0)"===t&&e.parentNode&&e.parentNode.nodeType===window.Node.ELEMENT_NODE;)e=e.parentNode,t=window.getComputedStyle(e).backgroundColor;return t},h=()=>(0,e.createElement)("div",{className:"crowdsignal-forms__style-probe"},(0,e.createElement)("p",null),(0,e.createElement)("h3",null,"Text"),(0,e.createElement)("div",{className:"wp-block-button"},(0,e.createElement)("div",{className:"wp-block-button__link"})),(0,e.createElement)("div",{className:"entry-content"},(0,e.createElement)("div",{className:"alignwide"}))),y=e=>{if(null===e)return{};const t=e.querySelector(".wp-block-button__link"),r=e.querySelector("p"),o=e.querySelector("h3"),n=e.querySelector(".alignwide");let s=b(t);const a=b(r),l=window.getComputedStyle(r).color;if(s===a){s=(i=t,"0px"!==window.getComputedStyle(i).borderBlockStartWidth?window.getComputedStyle(i).borderBlockStartColor:null)||l}var i;return{accentColor:s,backgroundColor:a,textColor:l,textColorInverted:window.getComputedStyle(t).color,textFont:window.getComputedStyle(r).fontFamily,textSize:window.getComputedStyle(r).fontSize,headingFont:window.getComputedStyle(o).fontFamily,contentWideWidth:window.getComputedStyle(n).maxWidth}};var S=window.crowdsignalForms.apiFetch,v=r.n(S);const k=(e,t)=>{return r=v()({path:(0,n.trimEnd)(`/crowdsignal-forms/v1/nps/${e||""}/response`),method:"POST",data:t}),new Promise(((e,t)=>{const o=setTimeout((()=>t(new Error("Request timed out"))),1e4);r.then(e,t).finally((()=>clearTimeout(o)))}));var r};var E,C,_=({attributes:r,onSubmit:o,responseMeta:s})=>{const[a,l]=(0,t.useState)("");return(0,e.createElement)("div",{className:"crowdsignal-forms-nps__feedback"},(0,e.createElement)("textarea",{className:"crowdsignal-forms-nps__feedback-text",rows:6,placeholder:r.feedbackPlaceholder,onChange:e=>l(e.target.value),value:a}),(0,e.createElement)("div",{className:"wp-block-button crowdsignal-forms-nps__feedback-button-wrapper"},(0,e.createElement)("button",{className:"wp-block-button__link crowdsignal-forms-nps__feedback-button",onClick:async()=>{null===s||(0,n.isEmpty)(a)||k(r.surveyId,{nonce:r.nonce,feedback:a,...s}),o()},type:"button"},r.submitButtonLabel)))},N=r(875),x=r.n(N),O=({attributes:r,onSubmit:o,onSubmitSuccess:s})=>{const[a,l]=(0,t.useState)(-1),i=e=>async()=>{l(e),k(r.surveyId,{nonce:r.nonce,score:e}).then((e=>s((0,n.pick)(e,["r","checksum"])))),setTimeout(o,300)};return(0,e.createElement)("div",{className:"crowdsignal-forms-nps__rating"},(0,e.createElement)("div",{className:"crowdsignal-forms-nps__rating-labels"},(0,e.createElement)("span",null,r.lowRatingLabel),(0,e.createElement)("span",null,r.highRatingLabel)),(0,e.createElement)("div",{className:"crowdsignal-forms-nps__rating-scale"},(0,n.times)(11,(t=>{const r=x()("crowdsignal-forms-nps__rating-button",{"is-active":t===a});return(0,e.createElement)("button",{key:`rating-${t}`,disabled:0<=a,className:r,onClick:i(t)},t)}))))},R=(E=({attributes:r,contentWidth:o,fallbackStyles:s,onClose:d,renderStyleProbe:p})=>{const[g,w]=(0,t.useState)(null),[b,h]=(0,t.useState)(i),y=(0,n.get)({[c]:r.feedbackQuestion,[i]:r.ratingQuestion,[u]:(0,l.__)("Thanks so much for your feedback!","crowdsignal-forms")},[b]),S={width:`${o}px`,...f(r,s)};return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{className:"crowdsignal-forms-nps",style:S},(0,e.createElement)("h3",{className:"crowdsignal-forms-nps__question",style:{whiteSpace:"pre-wrap"}},(0,a.decodeEntities)(y).split("<br>").join("\n")),(0,e.createElement)("button",{className:"crowdsignal-forms-nps__close-button",onClick:d},"âœ•"),b===i&&(0,e.createElement)(O,{attributes:r,onSubmit:()=>h(c),onSubmitSuccess:w}),b===c&&(0,e.createElement)(_,{attributes:r,responseMeta:g,onSubmit:()=>h(u)}),!r.hideBranding&&(0,e.createElement)(m,{showLogo:b===u,message:(0,l.__)("Collect your own feedback with Crowdsignal","crowdsignal-forms"),trackRef:"cs-forms-nps"})),p())},(C=e=>({fallbackStyles:y(e.querySelector(".crowdsignal-forms__style-probe"))}),(0,w.createHigherOrderComponent)((t=>class extends e.Component{constructor(e){super(e),this.nodeRef=this.props.node,this.state={fallbackStyles:void 0,grabStylesCompleted:!1},this.bindRef=this.bindRef.bind(this)}bindRef(e){e&&(this.nodeRef=e)}componentDidMount(){this.grabFallbackStyles()}componentDidUpdate(){this.grabFallbackStyles()}grabFallbackStyles(){const{grabStylesCompleted:e,fallbackStyles:t}=this.state;if(this.nodeRef&&!e){const e=C(this.nodeRef,this.props);g()(e,t)||this.setState({fallbackStyles:e,grabStylesCompleted:Object.values(e).every(Boolean)})}}render(){const r=(0,e.createElement)(t,{...this.props,...this.state.fallbackStyles});return this.props.node?r:(0,e.createElement)("div",{ref:this.bindRef}," ",r," ")}}),"withFallbackStyles"))((({fallbackStyles:t,...r})=>(0,e.createElement)(E,{fallbackStyles:t||{},renderStyleProbe:()=>t?null:(0,e.createElement)(h,null),...r}))));window.addEventListener("load",(()=>(0,n.forEach)(document.querySelectorAll("div[data-crowdsignal-nps]"),(t=>{try{const r=JSON.parse(t.dataset.crowdsignalNps),n=parseInt(r.viewThreshold,10);if(t.removeAttribute("data-crowdsignal-nps"),d.CLOSED===r.status)return;if(d.CLOSED_AFTER===r.status&&null!==r.closedAfterDateTime&&(new Date).toISOString()>r.closedAfterDateTime)return;if(!r.isPreview){const e=`cs-nps-views-${r.surveyId}`,t=1+parseInt(window.localStorage.getItem(e)||0,10);if(window.localStorage.setItem(e,t),t!==n)return}const a=()=>t.remove();(0,o.render)((0,e.createElement)(s,{onClose:a},(0,e.createElement)(R,{attributes:r,contentWidth:t.scrollWidth,onClose:a})),t)}catch(e){console.error(e)}}))))}()}();